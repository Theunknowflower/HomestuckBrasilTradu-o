<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Homestuck — Tradução de Fã</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <h1 class="logo">HS</h1>
    <nav>
      <button class="tab active" onclick="openTab('reader')">📖 Ler</button>
      <button class="tab" onclick="openTab('traducao')">📝 Tradução</button>
      <button class="tab" onclick="openTab('conquistas')">🏆 Conquistas</button>
      <button class="tab" onclick="openTab('indice')">📑 Índice</button>
      <button class="tab" onclick="openTab('comunidade')">🎨 Comunidade</button>
    </nav>
    <div class="user-menu">
      <span id="username">Convidado</span>
      <button onclick="openModal('login')">Login</button>
      <button id="logoutBtn" style="display:none" onclick="logout()">Sair</button>
    </div>
  </aside>

  <!-- Área principal -->
  <main class="content">
    <!-- Leitor -->
    <section id="reader" class="panel" style="display:block">
      <div class="card">
        <img src="assets/page1.png" alt="Página Homestuck" id="pageImg">
        <div class="controls">
          <button onclick="saveProgress()">💾 Salvar</button>
          <button onclick="prevPage()">◀ Anterior</button>
          <button onclick="nextPage()">Próxima ▶</button>
        </div>
      </div>
    </section>

    <!-- Tradução -->
    <section id="traducao" class="panel">
      <div class="card">
        <h3>Informações da Tradução</h3>
        <p><b>Equipe:</b> Rafa + Comunidade</p>
        <p><b>Status:</b> Ato 1 — em progresso</p>
        <p><b>Licença:</b> Trabalho de fã, sem fins lucrativos.</p>
      </div>
    </section>

    <!-- Conquistas -->
    <section id="conquistas" class="panel">
      <div class="card">
        <h3>Suas Conquistas</h3>
        <div id="achievementsList">Nenhuma ainda 😢</div>
      </div>
    </section>

    <!-- Índice -->
    <section id="indice" class="panel">
      <div class="card">
        <h3>Índice de Páginas</h3>
        <div id="pageIndex">Carregando índice...</div>
      </div>
    </section>

    <!-- Comunidade -->
    <section id="comunidade" class="panel">
      <div class="card">
        <h3>Fanarts & Fórum 🎨</h3>
        <div id="communityForm">
          <input type="text" id="postTitle" placeholder="Título" style="width:100%;margin-bottom:8px">
          <textarea id="postContent" placeholder="Descrição (opcional)" style="width:100%;height:60px;margin-bottom:8px"></textarea>
          <input type="url" id="postImage" placeholder="URL da imagem (opcional)" style="width:100%;margin-bottom:8px">
          <button class="btn-main" onclick="submitPost()">Publicar</button>
        </div>
        <hr>
        <div id="communityPosts">Carregando posts...</div>
      </div>
    </section>
  </main>

  <!-- Modal de Login -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <h2>Login</h2>
      <input type="email" id="loginEmail" placeholder="Digite seu e-mail" style="width:100%;margin-bottom:8px">
      <button onclick="loginWithOTP()">🔑 Entrar com Link Mágico</button>
      <button onclick="closeModal('login')">Fechar</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://unpkg.com/@supabase/supabase-js"></script>
  <script src="config.js"></script>
  <script src="script.js"></script>
</body>
</html>
